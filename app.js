(function(e){function t(t){for(var i,r,s=t[0],p=t[1],d=t[2],h=0,u=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(i in p)Object.prototype.hasOwnProperty.call(p,i)&&(e[i]=p[i]);c&&c(t);while(u.length)u.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var p=n[s];0!==o[p]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={app:0},a=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],p=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=p;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}})},a=[],r=n("5a89"),s=n("34ad"),p=n("4721"),d=n("f7e7"),c={name:"App"};const h="https://card.syui.ai/obj/ai.vrm",u=new r["Mb"];class l extends d["b"]{constructor(e,t){super(e,t),this.smoothFactor=10,this.yawLimit=45,this.pitchLimit=45,this._yawDamped=0,this._pitchDamped=0}update(e){if(this.target&&this.autoUpdate){this.lookAt(this.target.getWorldPosition(u)),(this.yawLimit<Math.abs(this._yaw)||this.pitchLimit<Math.abs(this._pitch))&&(this._yaw=0,this._pitch=0);const t=1-Math.exp(-this.smoothFactor*e);this._yawDamped+=(this._yaw-this._yawDamped)*t,this._pitchDamped+=(this._pitch-this._pitchDamped)*t,this.applier.applyYawPitch(this._yawDamped,this._pitchDamped),this._needsUpdate=!1}this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}}const w=new r["Ob"]({alpha:!0,antialias:!0});w.outputEncoding=r["Pb"],w.shadowMap.enabled=!0,w.setSize(window.innerWidth,window.innerHeight),w.setPixelRatio(window.devicePixelRatio),document.body.appendChild(w.domElement);const m=new r["ib"](30,window.innerWidth/window.innerHeight,.1,20);m.position.set(0,1,5);const f=new p["a"](m,w.domElement);f.screenSpacePanning=!1,f.target.set(0,1,0),f.update();const y=new r["vb"],b=new r["j"](16777215);y.background=new r["j"](b),y.fog=new r["s"](b,3,10);const g=new r["x"](16777215,4473924);g.position.set(0,20,0),y.add(g);const v=new r["W"](new r["kb"](10,10),new r["Y"]({color:16777215,depthWrite:!0}));v.position.y=-.5,v.rotation.x=-Math.PI/2,y.add(v);const _=new r["v"](50,100,16777215,16777215);y.add(_);const M=new r["l"](16777215);y.add(M);let P=void 0,x=void 0;const O=new r["w"];function j(e){const t=new s["a"];t.crossOrigin="anonymous",O.clear(),t.register(e=>new d["a"](e,{autoUpdateHumanBones:!0})),t.load(e,e=>{const t=e.userData.vrm;d["c"].removeUnnecessaryVertices(e.scene),d["c"].removeUnnecessaryJoints(e.scene),t.scene.traverse(e=>{e.frustumCulled=!1,e.castShadow=!0});const n=new l(t.humanoid,t.lookAt.applier);n.copy(t.lookAt),t.lookAt=n,y.add(t.scene),P=t,t.lookAt.target=m,P.humanoid.getNormalizedBoneNode("leftUpperArm").rotation.z=1.3,P.humanoid.getNormalizedBoneNode("rightUpperArm").rotation.z=-1.3})}function k(){var e=Math.random();e>.9?P.expressionManager.setValue("blink",1):P.expressionManager.setValue("blink",0)}O.renderOrder=1e3,y.add(O),j(h);const D=new r["i"];function A(){requestAnimationFrame(A);const e=D.getDelta();if(x&&x.update(e),P){const n=.01*Math.PI*Math.sin(Math.PI*D.elapsedTime);var t=Math.random();Math.sin(Math.PI*D.elapsedTime)>.1&&t>.9&&(k(),P.humanoid.getNormalizedBoneNode("neck").rotation.y=n),P.update(e)}w.render(y,m)}A();var U=c,S=n("2877"),z=Object(S["a"])(U,o,a,!1,null,null,null),N=z.exports;i["a"].config.productionTip=!1,new i["a"]({render:e=>e(N)}).$mount("#app")}});
//# sourceMappingURL=app.js.map